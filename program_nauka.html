<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiszki Renesansowe - Tryb Nauki</title>
    <link rel="stylesheet" href="style_learning.css">
</head>
<body>

    <h1>Agatkowe Fiszki - Tryb Nauki</h1>
    <div class="hint">Kliknij kartƒô by obr√≥ciƒá ‚Ä¢ U≈ºyj przycisk√≥w do nawigacji</div>

    <a href="program.html" class="nav-mode-switch">Widok Galerii (Wszystkie) üñºÔ∏è</a>
    
    <div id="single-card-container">
        <!-- Tu JavaScript wstawi aktywnƒÖ kartƒô -->
    </div>

    <div class="counter" id="counter-display">1 / ?</div>

    <div class="controls">
        <button id="prev-btn">Poprzednia</button>
        <button id="random-btn">Losowe: OFF</button>
        <button id="next-btn">Nastƒôpna</button>
    </div>

    <script>
        // BAZA DANYCH
        const originalArtworkData = [
            {
                img: "giotto.jpg",
                title: "Op≈Çakiwanie",
                author: "Giotto",
                date: "1304-1306",
                location: "Kaplica Scrovegnich, Padwa",
                school: "Protorenesans"
            },
            {
                img: "angelico_zwiastowanie.jpg",
                title: "Zwiastowanie",
                author: "Fra Angelico",
                date: "1 po≈Ç XV w.",
                location: "Klasztor San Marco, Florencja",
                school: "Szko≈Ça Florencka"
            },
            {
                img: "masaccio_trojca.jpg",
                title: "Tr√≥jca ≈öwiƒôta",
                author: "Masaccio",
                date: "1 po≈Ç XV w.",
                location: "Santa Maria Novella, Florencja",
                school: "Szko≈Ça Florencka"
            },
            {
                img: "masaccio_grosz.jpg",
                title: "Grosz Czynszowy",
                author: "Masaccio",
                date: "1 po≈Ç. XV w.",
                location: "Kaplica Brancaccich, Florencja",
                school: "Szko≈Ça Florencka"
            },
            {
                img: "masaccio_adam_ewa.jpg",
                title: "Adam i Ewa (Wygnanie z Raju)",
                author: "Masaccio",
                date: "1 po≈Ç. XV w.",
                location: "Kaplica Brancaccich, Florencja",
                school: "Szko≈Ça Florencka"
            },
            {
                img: "uccello_bitwa.jpg",
                title: "Bitwa pod San Romano I",
                author: "Uccello",
                date: "1435-1436",
                location: "Narodowa Galeria, Londyn",
                school: "Szko≈Ça Florencka"
            },
            {
                img: "ghirlandaio_starzec.jpg",
                title: "Starzec i ch≈Çopiec",
                author: "Ghirlandaio",
                date: "ok. 1490",
                location: "Luwr, Pary≈º",
                school: "Szko≈Ça Florencka"
            },
            {
                img: "verrocchio_chrzest.jpg",
                title: "Chrzest Chrystusa",
                author: "Verrocchio i Leonardo da Vinci",
                date: "ok. 1470-1475",
                location: "Galeria Uffizi, Florencja",
                school: "Szko≈Ça Florencka"
            },
            {
                img: "botticelli_wiosna.jpg",
                title: "Wiosna (Primavera)",
                author: "Sandro Botticelli",
                date: "1482",
                location: "Galeria Uffizi, Florencja",
                school: "Szko≈Ça Florencka"
            },
            {
                img: "botticelli_wenus.jpg",
                title: "Narodziny Wenus",
                author: "Sandro Botticelli",
                date: "ok. 1485",
                location: "Galeria Uffizi, Florencja",
                school: "Szko≈Ça Florencka"
            },
            {
                img: "bellini_procesja.jpg",
                title: "Procesja na placu ≈õw. Marka",
                author: "Gentile Bellini",
                date: "1496",
                location: "Galleria Akademii, Wenecja",
                school: "Szko≈Ça Wenecka"
            },
            {
                img: "bellini_madonna.jpg",
                title: "Madonna z DzieciƒÖtkiem",
                author: "Giovanni Bellini",
                date: "1480-90",
                location: "Accademia Carrara, Bergamo",
                school: "Szko≈Ça Wenecka"
            },
            {
                img: "giorgione_burza.jpg",
                title: "Burza",
                author: "Giorgione",
                date: "ok. 1506",
                location: "Galeria Akademii, Wenecja",
                school: "Szko≈Ça Wenecka"
            },
            {
                img: "giorgione_koncert.jpg",
                title: "Koncert wiejski",
                author: "Giorgione",
                date: "1509",
                location: "Luwr, Pary≈º",
                school: "Szko≈Ça Wenecka"
            },
            {
                img: "giorgione_wenus.jpg",
                title: "≈öpiƒÖca Wenus",
                author: "Giorgione",
                date: "ok. 1509-1510",
                location: "Galeria w Dre≈∫nie (Zwinger)",
                school: "Szko≈Ça Wenecka"
            },
             {
                img: "tycjan_wenus.jpg",
                title: "Wenus z Urbino",
                author: "Tycjan",
                date: "1538",
                location: "Galeria Uffizi, Florencja",
                school: "Szko≈Ça Wenecka"
            },
            {
                img: "tycjan_karol.jpg",
                title: "Karol V po bitwie pod M√ºhlberg",
                author: "Tycjan",
                date: "1548",
                location: "Prado, Madryt",
                school: "Szko≈Ça Wenecka"
            },
            {
                img: "tycjan_pawel.jpg",
                title: "Portret papie≈ºa Paw≈Ça III",
                author: "Tycjan",
                date: "1545‚Äì1546",
                location: "Museo di Capodimonte, Neapol",
                school: "Szko≈Ça Wenecka"
            },
            {
                img: "tycjan_koronowanie.jpg",
                title: "Cierniem koronowanie",
                author: "Tycjan",
                date: "1570",
                location: "Stara Pinakoteka, Monachium",
                school: "Szko≈Ça Wenecka"
            },
            {
                img: "tycjan_pieta.jpg",
                title: "Pieta",
                author: "Tycjan",
                date: "1570-1576",
                location: "Galeria Akademii, Wenecja",
                school: "Szko≈Ça Wenecka"
            },
            {
                img: "mantegna_chrystus.jpg",
                title: "Martwy Chrystus",
                author: "Andrea Mantegna",
                date: "1475‚Äì1478",
                location: "Pinakoteka Brera, Mediolan",
                school: "Szko≈Ça Padewska"
            },
            {
                img: "mantegna_camera.jpg",
                title: "Camera degli Sposi (Fresk)",
                author: "Andrea Mantegna",
                date: "1465-74",
                location: "Pa≈Çac Gonzag√≥w, Mantua",
                school: "Szko≈Ça Padewska"
            },
            {
                img: "piero_chrzest.jpg",
                title: "Chrzest Chrystusa",
                author: "Piero della Francesca",
                date: "lata 50. XV w.",
                location: "National Gallery, Londyn",
                school: "Renesans"
            },
            {
                img: "piero_montefeltro.jpg",
                title: "Portret Federica da Montefeltro",
                author: "Piero della Francesca",
                date: "ok. 1465-70",
                location: "Galeria Uffizi, Florencja",
                school: "Renesans"
            },
            {
                img: "piero_zmartwychwstanie.jpg",
                title: "Zmartwychwstanie",
                author: "Piero della Francesca",
                date: "ok. 1465",
                location: "Museo Civico, Sansepolcro",
                school: "Fresk"
            },
            {
                img: "rafael_slub.jpg",
                title: "Za≈õlubiny Marii (Sposalizio)",
                author: "Rafael Santi",
                date: "1504",
                location: "Pinakoteka Brera, Mediolan",
                school: "Renesans"
            },
            {
                img: "rafael_ogrodniczka.jpg",
                title: "Piƒôkna Ogrodniczka",
                author: "Rafael Santi",
                date: "ok. 1507-1508",
                location: "Luwr, Pary≈º",
                school: "Renesans"
            },
             {
                img: "rafael_madonna.jpg",
                title: "Madonna Syksty≈Ñska",
                author: "Rafael Santi",
                date: "ok. 1513‚Äì1514",
                location: "Galeria Starych Mistrz√≥w, Drezno",
                school: "Renesans"
            },
            {
                img: "rafael_szkola.jpg",
                title: "Szko≈Ça Ate≈Ñska",
                author: "Rafael Santi",
                date: "1509-1511",
                location: "Stanze Watyka≈Ñskie, Rzym",
                school: "Renesans Rzymski"
            },
            {
                img: "michalaniol_stworzenie.jpg",
                title: "Stworzenie Adama",
                author: "Micha≈Ç Anio≈Ç",
                date: "1511",
                location: "Kaplica Syksty≈Ñska, Rzym",
                school: "Fresk"
            },
            {
                img: "michalaniol_sad.jpg",
                title: "SƒÖd Ostateczny",
                author: "Micha≈Ç Anio≈Ç",
                date: "1534-1541",
                location: "Kaplica Syksty≈Ñska, Rzym",
                school: "Fresk"
            },
            {
                img: "leonardo_dama.jpg",
                title: "Dama z gronostajem",
                author: "Leonardo da Vinci",
                date: "1483-1490",
                location: "Muzeum Czartoryskich, Krak√≥w",
                school: "Renesans"
            },
             {
                img: "leonardo_wieczerza.jpg",
                title: "Ostatnia Wieczerza",
                author: "Leonardo da Vinci",
                date: "1495-1498",
                location: "Santa Maria delle Grazie, Mediolan",
                school: "Renesans"
            },
            {
                img: "leonardo_madonna.jpg",
                title: "Madonna w grocie",
                author: "Leonardo da Vinci",
                date: "1483-1490",
                location: "Luwr, Pary≈º",
                school: "Renesans"
            },
            {
                img: "leonardo_monalisa.jpg",
                title: "Mona Lisa",
                author: "Leonardo da Vinci",
                date: "1503-1505",
                location: "Luwr, Pary≈º",
                school: "Renesans"
            },
             {
                img: "brunelleschi_kopula.jpg",
                title: "Kopu≈Ça Katedry",
                author: "Filippo Brunelleschi",
                date: "1420",
                location: "Florencja",
                school: "Architektura"
            },
            {
                img: "brunelleschi_szpital.jpg",
                title: "Szpital NiewiniƒÖtek",
                author: "Filippo Brunelleschi",
                date: "1420",
                location: "Florencja",
                school: "Architektura"
            },
            {
                img: "brunelleschi_pitti.jpg",
                title: "Pa≈Çac Pitti",
                author: "Filippo Brunelleschi",
                date: "2 po≈Ç XV w.",
                location: "Florencja",
                school: "Architektura"
            },
            {
                img: "bramante_tempietto.jpg",
                title: "Tempietto",
                author: "Donato Bramante",
                date: "1502",
                location: "Rzym",
                school: "Architektura"
            },
            {
                img: "palladio_rotonda.jpg",
                title: "Willa Rotonda",
                author: "Andrea Palladio",
                date: "2 po≈Ç. XVI w.",
                location: "Vicenza k. Wenecji",
                school: "Architektura"
            },
            {
                img: "michalaniol_biblioteka.jpg",
                title: "Biblioteka Laurenziana",
                author: "Micha≈Ç Anio≈Ç",
                date: "1524-1534",
                location: "Florencja",
                school: "Architektura"
            },
            {
                img: "michalaniol_kopula.jpg",
                title: "Kopu≈Ça bazyliki ≈õw. Piotra",
                author: "Micha≈Ç Anio≈Ç",
                date: "1 po≈Ç XVI w.",
                location: "Rzym",
                school: "Architektura"
            },
            {
                img: "ghiberti_izaak.jpg",
                title: "Ofiara Izaaka (Drzwi Raju)",
                author: "Lorenzo Ghiberti",
                date: "1401",
                location: "Muzeum Bargello, Florencja",
                school: "Rze≈∫ba (BrƒÖz)"
            },
            {
                img: "donatello_dawid.jpg",
                title: "Dawid (BrƒÖz)",
                author: "Donatello",
                date: "1430",
                location: "Muzeum Bargello, Florencja",
                school: "Rze≈∫ba (BrƒÖz)"
            },
            {
                img: "verrocchio_dawid.jpg",
                title: "Dawid (BrƒÖz)",
                author: "Verrocchio",
                date: "1475",
                location: "Muzeum Bargello, Florencja",
                school: "Rze≈∫ba (BrƒÖz)"
            },
            {
                img: "donatello_gattamelata.jpg",
                title: "Pomnik Gattamelaty",
                author: "Donatello",
                date: "1450",
                location: "Padwa",
                school: "Rze≈∫ba (Konny)"
            },
            {
                img: "verrocchio_colleoni.jpg",
                title: "Pomnik Colleoniego",
                author: "Verrocchio",
                date: "1450",
                location: "Wenecja",
                school: "Rze≈∫ba (Konny)"
            },
            {
                img: "michalaniol_pieta.jpg",
                title: "Piet√† Watyka≈Ñska",
                author: "Micha≈Ç Anio≈Ç",
                date: "1497‚Äì1500",
                location: "Bazylika ≈õw. Piotra, Watykan",
                school: "Rze≈∫ba (Marmur)"
            },
            {
                img: "michalaniol_dawid.jpg",
                title: "Dawid",
                author: "Micha≈Ç Anio≈Ç",
                date: "1501-1504",
                location: "Galleria dell'Accademia, Florencja",
                school: "Rze≈∫ba (Marmur)"
            },
            {
                img: "michalaniol_mojzesz.jpg",
                title: "Moj≈ºesz",
                author: "Micha≈Ç Anio≈Ç",
                date: "1513‚Äì1516",
                location: "Bazylika ≈õw. Piotra w Okowach, Rzym",
                school: "Rze≈∫ba (Marmur)"
            },
            {
                img: "michalaniol_wawrzyniec.jpg",
                title: "Nagrobek Wawrzy≈Ñca Medyceusza",
                author: "Micha≈Ç Anio≈Ç",
                date: "1520‚Äì1535",
                location: "San Lorenzo, Florencja",
                school: "Rze≈∫ba (Marmur)"
            },
            {
                img: "michalaniol_julian.jpg",
                title: "Nagrobek Juliusza Medyceusza",
                author: "Micha≈Ç Anio≈Ç",
                date: "1520‚Äì1535",
                location: "San Lorenzo, Florencja",
                school: "Rze≈∫ba (Marmur)"
            },
            {
                img: "michalaniol_rondanini.jpg",
                title: "Piet√† Rondanini",
                author: "Micha≈Ç Anio≈Ç",
                date: "1564",
                location: "Castello Sforzesco, Mediolan",
                school: "Rze≈∫ba (Marmur)"
            }
        ];

        // Zmienne stanu
        let currentData = [...originalArtworkData]; // Kopia do pracy (mo≈ºe byƒá tasowana)
        let currentIndex = 0;
        let isRandomMode = false;

        // Elementy DOM
        const cardContainer = document.getElementById('single-card-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const randomBtn = document.getElementById('random-btn');
        const counterDisplay = document.getElementById('counter-display');

        // Funkcje
        function renderCard(index) {
            const item = currentData[index];
            const cardHTML = `
                <div class="card" onclick="this.classList.toggle('is-flipped')">
                    <div class="card-inner">
                        <div class="card-front">
                            <img src="${item.img}" alt="${item.title}" loading="lazy" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div class="placeholder" style="display:none;">Zdjƒôcie niedostƒôpne:<br>${item.img}</div>
                        </div>
                        <div class="card-back">
                            <h2>${item.title}</h2>
                            <div>
                                <span class="label">Autor:</span>
                                <p>${item.author}</p>
                            </div>
                            <div>
                                <span class="label">Data:</span>
                                <p>${item.date}</p>
                            </div>
                            <div>
                                <span class="label">Lokalizacja:</span>
                                <p>${item.location}</p>
                            </div>
                            <div>
                                <span class="label">Szko≈Ça/Technika:</span>
                                <p>${item.school}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Animacja wej≈õcia (opcjonalnie)
            cardContainer.style.opacity = '0';
            setTimeout(() => {
                cardContainer.innerHTML = cardHTML;
                cardContainer.style.opacity = '1';
                updateCounter();
            }, 150);
            cardContainer.style.transition = 'opacity 0.15s ease';
        }

        function updateCounter() {
            counterDisplay.innerText = `${currentIndex + 1} / ${currentData.length}`;
            
            // Obs≈Çuga stanu przycisk√≥w
            prevBtn.disabled = (!isRandomMode && currentIndex === 0); // W klasycznym trybie blokujemy 'wstecz' na starcie
            prevBtn.style.opacity = prevBtn.disabled ? '0.5' : '1';
            
            // Zapƒôtlanie w trybie losowym nie ma ko≈Ñca, w trybie zwyk≈Çym blokuje next na ko≈Ñcu
            nextBtn.disabled = (!isRandomMode && currentIndex === currentData.length - 1);
            nextBtn.style.opacity = nextBtn.disabled ? '0.5' : '1';
        }

        function nextCard() {
            if (currentIndex < currentData.length - 1) {
                currentIndex++;
                renderCard(currentIndex);
            } else if (isRandomMode) {
                 // W trybie losowym po dotarciu do 'ko≈Ñca' potasowanej listy, tasujemy od nowa
                 reshuffle();
            }
        }

        function prevCard() {
            if (currentIndex > 0) {
                currentIndex--;
                renderCard(currentIndex);
            }
        }

        function toggleRandomMode() {
            isRandomMode = !isRandomMode;
            
            if (isRandomMode) {
                randomBtn.innerText = "Losowe: ON";
                randomBtn.classList.add('active-mode');
                reshuffle(); // Tasujemy i startujemy od nowa
            } else {
                randomBtn.innerText = "Losowe: OFF";
                randomBtn.classList.remove('active-mode');
                // Wracamy do orygina≈Çu
                currentData = [...originalArtworkData];
                currentIndex = 0;
                renderCard(currentIndex);
            }
        }

        function reshuffle() {
            // Algorytm Fisher-Yates shuffle
            for (let i = currentData.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [currentData[i], currentData[j]] = [currentData[j], currentData[i]];
            }
            currentIndex = 0;
            renderCard(currentIndex);
        }

        // Event Listeners - Klawiatura
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                if(!isRandomMode && currentIndex === currentData.length - 1) return; // Stop at end
                nextCard();
            } else if (e.key === 'ArrowLeft') {
                prevCard();
            }
        });

        // Event Listeners - Przyciski
        nextBtn.addEventListener('click', nextCard);
        prevBtn.addEventListener('click', prevCard);
        randomBtn.addEventListener('click', toggleRandomMode);

        // Start
        renderCard(currentIndex);

    </script>
</body>
</html>